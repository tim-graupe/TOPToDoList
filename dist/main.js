(()=>{const t=document.getElementById("new-project-btn"),e=document.getElementById("project-list"),i=document.getElementById("current-project-tasks"),n=document.getElementById("current-project-title");n.setAttribute("id","projectTitle");const o=JSON.parse(localStorage.getItem("projects"))||[];let l=JSON.parse(localStorage.getItem("tasks"))||[];t.addEventListener("click",(()=>{s()}));const s=()=>{const t=prompt("Project name?");if(""==t)alert("Empty field!");else if(o.some((e=>e.title==t)))alert("Duplicate project name!");else{const e={title:t,todos:[]};o.push(e),r(e),localStorage.setItem("projects",JSON.stringify(o))}},r=t=>{const i=document.createElement("li"),s=document.createElement("div"),r=document.createElement("div");s.setAttribute("class","material-icons"),s.textContent="edit",r.textContent="delete",r.setAttribute("class","material-icons"),i.setAttribute("id","list-node"),i.textContent=t.title,i.appendChild(s),i.appendChild(r),e.appendChild(i),i.addEventListener("click",(()=>{n.textContent=t.title,d(t)})),s.addEventListener("click",(e=>{if(e.stopPropagation(),t.title=prompt("Change name"),t.title.length>0)i.textContent=t.title,i.appendChild(s),i.appendChild(r),localStorage.setItem("tasks",JSON.stringify(l)),localStorage.setItem("projects",JSON.stringify(o));else if(null==t.title)return})),r.addEventListener("click",(n=>{n.stopPropagation();let s="Are you sure you wish to delete your "+t.title+" project?";if(1==confirm(s))for(var r=o.length-1;r>=0;r--)o[r].title===t.title&&(o.splice(r,1),e.removeChild(i),localStorage.setItem("tasks",JSON.stringify(l)),localStorage.setItem("projects",JSON.stringify(o)))}))};o.forEach(r);const a=t=>{for(JSON.stringify(o);i.firstChild;)i.removeChild(i.firstChild);t.todos.forEach((e=>{const n=document.createElement("li"),s=document.createElement("div");s.setAttribute("class","material-icons"),s.textContent="delete";const r=document.createElement("div");r.setAttribute("class","material-icons"),r.textContent="edit";const a=document.createElement("div");a.setAttribute("class","material-icons"),a.textContent="priority_high";const c=document.createElement("div");c.setAttribute("class","material-icons"),c.textContent="done_outline";const d=document.createElement("date");d.setAttribute("class","material-icons"),d.textContent="event",n.textContent=e.title,n.className="addedTask",n.appendChild(r),n.appendChild(s),n.appendChild(a),n.appendChild(c),n.appendChild(d),i.appendChild(n),l.push(e),s.addEventListener("click",(()=>{for(var s=t.todos.length-1;s>=0;s--)t.todos[s].title===e.title&&(t.todos.splice(s,1),i.removeChild(n),localStorage.setItem("tasks",JSON.stringify(l)),localStorage.setItem("projects",JSON.stringify(o)))})),r.addEventListener("click",(()=>{if(e.title=prompt("Change name"),e.title.length>0)n.textContent=e.title,n.appendChild(r),n.appendChild(s),localStorage.setItem("tasks",JSON.stringify(l)),localStorage.setItem("projects",JSON.stringify(o));else if(null==e.title)return})),a.addEventListener("click",(()=>{"red"==a.style.color?(a.style.color="yellow",e.priority="Medium"):"yellow"==a.style.color?(a.style.color="green",e.priority="Low"):(a.style.color="red",e.priority="High")})),c.addEventListener("click",(()=>{"none"==n.style.textDecoration?n.style.textDecoration="line-through":n.style.textDecoration="none"})),d.addEventListener("click",(()=>{let t=new t;console.log(t)})),localStorage.setItem("tasks",JSON.stringify(l)),localStorage.setItem("projects",JSON.stringify(o))}))};function c(t,e,i,n){this.title=t,this.description=e,this.dueDate=i,this.priority=n}const d=t=>{a(t);const e=document.createElement("input"),i=document.createElement("button");e.setAttribute("class","input-section"),i.setAttribute("class","input-section"),i.textContent="Send",n.appendChild(i),n.appendChild(e),e.addEventListener("keypress",(i=>{if("Enter"===i.key){i.preventDefault();const n=new c(e.value,"Add Description","Change Due Date","Set Priority");t.todos.push(n),a(t),localStorage.setItem("tasks",JSON.stringify(l)),e.value=""}})),i.addEventListener("click",(i=>{i.preventDefault();const n=new c(e.value,"Add Description","Change Due Date","Set Priority");t.todos.push(n),a(t),localStorage.setItem("tasks",JSON.stringify(l)),e.value=""})),localStorage.setItem("tasks",JSON.stringify(l))}})();