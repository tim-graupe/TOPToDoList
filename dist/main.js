(()=>{"use strict";let t=JSON.parse(localStorage.getItem("tasks"))||[];const e=e=>{for(JSON.stringify(n);r.firstChild;)r.removeChild(r.firstChild);e.todos.forEach((i=>{const s=document.createElement("li"),o=document.createElement("div");o.setAttribute("class","material-icons"),o.textContent="delete";const l=document.createElement("div");l.setAttribute("class","material-icons"),l.textContent="edit";const a=document.createElement("div");a.setAttribute("class","material-icons"),a.textContent="priority_high";const c=document.createElement("div");c.setAttribute("class","material-icons"),c.textContent="done_outline";const d=document.createElement("date");d.setAttribute("class","material-icons"),d.textContent="event",s.textContent=i.title,s.className="addedTask",s.appendChild(l),s.appendChild(o),s.appendChild(a),s.appendChild(c),s.appendChild(d),r.appendChild(s),t.push(i),o.addEventListener("click",(()=>{for(var o=e.todos.length-1;o>=0;o--)e.todos[o].title===i.title&&(e.todos.splice(o,1),r.removeChild(s),localStorage.setItem("tasks",JSON.stringify(t)),localStorage.setItem("projects",JSON.stringify(n)))})),l.addEventListener("click",(()=>{if(i.title=prompt("Change name"),i.title.length>0)s.textContent=i.title,s.appendChild(l),s.appendChild(o),localStorage.setItem("tasks",JSON.stringify(t)),localStorage.setItem("projects",JSON.stringify(n));else if(null==i.title)return})),a.addEventListener("click",(()=>{"red"==a.style.color?(a.style.color="yellow",i.priority="Medium",localStorage.setItem("tasks",JSON.stringify(t)),localStorage.setItem("projects",JSON.stringify(n))):"yellow"==a.style.color?(a.style.color="green",i.priority="Low",localStorage.setItem("tasks",JSON.stringify(t)),localStorage.setItem("projects",JSON.stringify(n))):(a.style.color="red",i.priority="High",localStorage.setItem("tasks",JSON.stringify(t)),localStorage.setItem("projects",JSON.stringify(n)))})),c.addEventListener("click",(()=>{"none"==s.style.textDecoration?(s.style.textDecoration="line-through",localStorage.setItem("tasks",JSON.stringify(t)),localStorage.setItem("projects",JSON.stringify(n))):(s.style.textDecoration="none",localStorage.setItem("tasks",JSON.stringify(t)),localStorage.setItem("projects",JSON.stringify(n)))})),d.addEventListener("click",(()=>{let t=new Date;console.log(t)})),localStorage.setItem("tasks",JSON.stringify(t)),localStorage.setItem("projects",JSON.stringify(n))}))};function i(t,e,i,s){this.title=t,this.description=e,this.dueDate=i,this.priority=s}const s=s=>{e(s);const o=document.createElement("input"),n=document.createElement("button");o.setAttribute("class","input-section"),n.setAttribute("class","input-section"),n.textContent="Send",projectTitle.appendChild(n),projectTitle.appendChild(o),o.addEventListener("keypress",(n=>{if("Enter"===n.key){n.preventDefault();const l=new i(o.value,"Add Description","Change Due Date","Set Priority");s.todos.push(l),e(s),localStorage.setItem("tasks",JSON.stringify(t)),o.value=""}})),n.addEventListener("click",(n=>{n.preventDefault();const l=new i(o.value,"Add Description","Change Due Date","Set Priority");s.todos.push(l),e(s),localStorage.setItem("tasks",JSON.stringify(t)),o.value=""})),localStorage.setItem("tasks",JSON.stringify(t))},o=document.getElementById("new-project-btn"),n=JSON.parse(localStorage.getItem("projects"))||[],l=document.getElementById("project-list"),r=document.getElementById("current-project-tasks"),a=document.getElementById("current-project-title");a.setAttribute("id","projectTitle"),o.addEventListener("click",(()=>{c()}));const c=()=>{const t=prompt("Project name?");if(""==t)alert("Empty field!");else if(n.some((e=>e.title==t)))alert("Duplicate project name!");else{const e={title:t,todos:[]};n.push(e),d(e),localStorage.setItem("projects",JSON.stringify(n))}},d=e=>{const i=document.createElement("li"),o=document.createElement("div"),r=document.createElement("div");o.setAttribute("class","material-icons"),o.textContent="edit",r.textContent="delete",r.setAttribute("class","material-icons"),i.setAttribute("id","list-node"),i.textContent=e.title,i.appendChild(o),i.appendChild(r),l.appendChild(i),i.addEventListener("click",(()=>{a.textContent=e.title,s(e)})),o.addEventListener("click",(s=>{if(s.stopPropagation(),e.title=prompt("Change name"),e.title.length>0)i.textContent=e.title,i.appendChild(o),i.appendChild(r),localStorage.setItem("tasks",JSON.stringify(t)),localStorage.setItem("projects",JSON.stringify(n));else if(null==e.title)return})),r.addEventListener("click",(s=>{s.stopPropagation();let o="Are you sure you wish to delete your "+e.title+" project?";if(1==confirm(o))for(var r=n.length-1;r>=0;r--)n[r].title===e.title&&(n.splice(r,1),l.removeChild(i),localStorage.setItem("tasks",JSON.stringify(t)),localStorage.setItem("projects",JSON.stringify(n)))}))};n.forEach(d),s(),o(),e(),t()})();